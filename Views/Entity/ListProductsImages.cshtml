@model projectMVC.Models.ProductsImagesViewModel;
@{
    ViewData["Title"] = "Entity Framework - Products";
    string FlashClass = (string) TempData["FlashClass"];
    string FlashMessage = (string) TempData["FlashMessage"];
}
<h1>Entity Framework - Products (paginated) - Product Images: @ViewBag.Name</h1>
@if(FlashClass != null)
{
    <div class="alert alert-@FlashClass alert-dismissible fade show" role="alert">
        @FlashMessage
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}
<div class="row">
    <form asp-controller="entity" asp-action="ListProductsImages" method="POST" enctype="multipart/form-data">
        <div class="row">
            <div class="form-group">
                <label for="image">Foto</label>
                <input type="file" name="files" id="fileUpload" multiple class="form-control" />
            </div>
        </div>
        <input type="hidden" asp-for="@Model.ProductImage.ProductId" value="@ViewBag.Id"/>
        <input type="submit" value="Subir" class="btn btn-primary"/>
    </form>
</div>
<hr/>
<div class="row">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Foto</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach(var item in Model.ProductsImages)
            {
                <tr>
                    <td>
                        <img src="~/uploads/products/@item.Name" width=200/>
                    </td>
                    <td>
                        <a href="javascript:void(0);" onclick="confirmSweet('Realmente desea eliminar este registro?', '/entity/products-images/delete/@item.Id');" >
                            Eliminar
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<script>
    function confirmSweet(question, path) {
    Swal.fire({
        title: question,
        icon: 'error',
        showDenyButton: true,
        showCancelButton: false,
        confirmButtonText: "SÃ­",
        confirmButtonColor: "#3085d6",
        cancelButtonText: "No",
        cancelButtonColor: "#d33"
    }).then((result) => {
        if (result.isConfirmed) {
            window.location=path
        }
    });
}
</script>
